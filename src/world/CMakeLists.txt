# Copyright (C) 2014-2016 AscEmu Team <http://www.ascemu.org>

# set up our project name
project(world CXX)

set(sources
   Commands/AccountCommands.cpp
   Commands/ArenaCommands.cpp
   Commands/CharacterCommands.cpp
   Commands/CheatCommands.cpp
   Commands/DebugCommands.cpp
   Commands/GameEventMgrCommands.cpp
   Commands/GameMasterCommands.cpp
   Commands/GameObjectCommands.cpp
   Commands/LookupCommands.cpp
   Commands/MiscCommands.cpp
   Commands/NpcCommands.cpp
   Commands/ServerCommands.cpp
   Commands/TransporterCommands.cpp
   Commands/TicketCommands.cpp
   Commands/WaypointCommands.cpp
   DBC/DBCStores.cpp
   DBC/DBCLoader.cpp
   DBC/DBCRecord.cpp
   DBC/DBCSQL.cpp
   AchievementMgr.cpp 
   CollideInterface.cpp 
	DayWatcherThread.cpp 
	CommonScheduleThread.cpp 
	ArenaTeam.cpp 
	DatabaseCleaner.cpp 
	AddonMgr.cpp 
	AIInterface.cpp 
	AIEvents.cpp
	AreaTrigger.cpp 
	Arenas.cpp 
	AuctionHouse.cpp 
	AuctionMgr.cpp 
	Battleground.cpp
	BattlegroundCommands.cpp 
	BattlegroundHandler.cpp 
	BattlegroundMgr.cpp 
    CalendarHandler.cpp
    CalendarMgr.cpp
	Channel.cpp 
	ChannelHandler.cpp 
	CharacterHandler.cpp 
	Chat.cpp 
	ChatHandler.cpp
    CObjectFactory.cpp
	CombatHandler.cpp 
	Container.cpp 
	Corpse.cpp 
	Creature.cpp 
	Entities/Summons/Summon.cpp
	Entities/Summons/CompanionSummon.cpp
	Entities/Summons/GuardianSummon.cpp
	Entities/Summons/PossessedSummon.cpp
	Entities/Summons/TotemSummon.cpp
	Entities/Summons/WildSummon.cpp
	debugcmds.cpp 
	DuelHandler.cpp 
	DynamicObject.cpp 
	EquipmentSetMgr.cpp
	EventableObject.cpp 
	EventMgr.cpp 
	Faction.cpp
    GameEvent.cpp
    GameEventMgr.cpp
	GameObject.cpp 
	GMTicket.cpp 
	GMTicketCommands.cpp
	CRitual.cpp
	Gossip.cpp
	Group.cpp 
	GroupHandler.cpp 
	Guild.cpp 
	GuildHandler.cpp 
	HonorHandler.cpp 
	InstanceCommands.cpp 
	Item.cpp 
	ItemHandler.cpp 
	ItemInterface.cpp 
	Level0.cpp 
	Level1.cpp 
	Level2.cpp 
	Level3.cpp 
    LfgGroupData.cpp
    LfgPlayerData.cpp
	LfgHandler.cpp 
	LfgMgr.cpp 
	LootMgr.cpp 
	LocalizationMgr.cpp 
	LogonCommClient.cpp 
	LogonCommHandler.cpp 
	MailHandler.cpp
    MailMgr.cpp
   Main.cpp
    MapManagement/AreaManagement/AreaStorage.cpp
	MapCell.cpp 
	Map.cpp 
	MapScriptInterface.cpp 
	MapMgr.cpp 
	MiscHandler.cpp
   Movement/MovementCommon.cpp
   Movement/Spline/MovementSpline.cpp
   Movement/Spline/SplineFlags.cpp
   Movement/UnitMovementManager.cpp
   MySQLDataStore.cpp
   Packets/Movement/CreatureMovement.cpp
   Packets/ManagedPacket.cpp
	MovementHandler.cpp 
	NPCHandler.cpp 
	Object.cpp 
	ObjectMgr.cpp 
	Opcodes.cpp 
	Pet.cpp 
	PetHandler.cpp 
	Player.cpp
	PlayerCache.cpp
	PlayerPacketWrapper.cpp
	QueryHandler.cpp 
	Quest.cpp 
	QuestHandler.cpp 
    QuestLogEntry.cpp
	QuestMgr.cpp 
	QuestCommands.cpp 
	RaidHandler.cpp 
	RecallCommands.cpp 
	ReputationHandler.cpp 
	ScriptMgr.cpp 
	SocialHandler.cpp 
	SpeedDetector.cpp
   SpellManagement/SpellCustomizations.cpp
	SpellAuras.cpp 
	SpellTarget.cpp 
	Spell.cpp 
	StdAfx.cpp
	SummonHandler.cpp
	SpellEffects.cpp 
	SpellHandler.cpp 
	HackFixes.cpp 
	Stats.cpp 
	TaxiHandler.cpp 
	TaxiMgr.cpp 
	TerrainMgr.cpp 
	TradeHandler.cpp 
	TransporterHandler.cpp 
	Unit.cpp 
	Vehicle.cpp 
	VehicleHandler.cpp
	WeatherMgr.cpp 
	World.cpp 
	WorldCreator.cpp 
	WorldSession.cpp 
	WorldSocket.cpp 
	WorldStatesHandler.cpp
	WorldRunnable.cpp 
	WordFilter.cpp 
	Master.cpp 
	CConsole.cpp 
	ConsoleCommands.cpp 
	ConsoleListener.cpp 
	WUtil.cpp 
	SpellProc.cpp
   SpellProc_ClassScripts.cpp
	SpellProc_Items.cpp
	SpellMgr.cpp
   Spell_ClassScripts.cpp
	DeathKnight.cpp
)

if(WIN32)
   set(sources ${sources} resources.rc)
endif()

set(headers
	AchievementMgr.h
	AddonMgr.h
	AIInterface.h
	AIEvents.h
	AreaTrigger.h
	Arenas.h
	ArenaTeam.h
	AuctionHouse.h
	AuctionMgr.h
	BaseConsole.h
	Battleground.h
	BattlegroundMgr.h
    CalendarMgr.h
	CConsole.h
	CellHandler.h
    CellHandlerDefines.hpp
	Channel.h
	ChannelMgr.h
	Chat.h
    CObjectFactory.h
	CollideInterface.h
	CommonScheduleThread.h
	Entities/Summons/CompanionSummon.h
    Entities/Summons/SummonDefines.hpp
	ConsoleCommands.h
	Container.h
	Corpse.h
	Creature.h
    CreatureDefines.hpp
	DatabaseCleaner.h
	DayWatcherThread.h
    DBC/DBCGlobals.hpp
    DBC/DBCLoader.hpp
    DBC/DBCRecord.hpp
    DBC/DBCSQL.hpp
    DBC/DBCStorage.hpp
	DBC/DBCStores.h
    DBC/DBCStructures.hpp
	Definitions.h
	DynamicObject.h
	EquipmentSetMgr.h
	EventableObject.h
	EventMgr.h
	Faction.h
    GameEvent.h
    GameEventMgr.h
	GameObject.h
	CRitual.h
    Gossip/GossipDefines.hpp
	Gossip.h
	Group.h
	Entities/Summons/GuardianSummon.h
	Guild.h
	HonorHandler.h
	Item.h
	ItemInterface.h
	ItemPrototype.h
	IUpdatable.h
    Lfg.h
    LfgGroupData.h
    LfgPlayerData.h
	LfgMgr.h
	LocalizationMgr.h
	LogonCommClient.h
	LogonCommHandler.h
	LootMgr.h
	MailMgr.h
	MainServerDefines.h
    MapManagement/MapManagementGlobals.hpp
    MapManagement/AreaManagement/AreaStorage.hpp
    MapManagement/AreaManagement/AreaManagementGlobals.hpp
	Map.h
	MapCell.h
	MapMgr.h
    MapMgrDefines.hpp
	MapScriptInterface.h
	Master.h
	MiscHandler.h
   Movement/MovementCommon.hpp
   Movement/UnitMovementManager.hpp
   Movement/Spline/MovementSpline.hpp
   Movement/Spline/MovementSplineDefines.hpp
   Movement/Spline/SplineFlags.hpp
   MySQLDataStore.hpp
   Packets/Movement/CreatureMovement.hpp
   Packets/Movement/SmsgMonsterMove.hpp
   Packets/ManagedPacket.hpp
	NPCHandler.h
	Object.h
	ObjectMgr.h
	Opcodes.h
	Pet.h
	Player.h
   Player/PlayerClasses.hpp
    PlayerDefines.hpp
	PlayerCache.h
	Entities/Summons/PossessedSummon.h
	Quest.h
    QuestDefines.hpp
    QuestLogEntry.hpp
	QuestMgr.h
    RecastIncludes.hpp
	ScriptMgr.h
	ScriptSetup.h
	Skill.h
	SkillNameMgr.h
	SpeedDetector.h
   SpellManagement/SpellCustomizations.hpp
	Spell.h
	SpellAuras.h
	SpellFailure.h
	SpellMgr.h
	SpellNameHashes.h
	SpellProc.h
	SpellTarget.h
	Stats.h
	StdAfx.h
	Entities/Summons/Summon.h
	SummonHandler.h
	TaxiMgr.h
	TerrainMgr.h
	Entities/Summons/TotemSummon.h
    Transports/TransportSpawn.hpp
	TransporterHandler.h
	Unit.h
    UnitDefines.hpp
	UpdateFields.h
	UpdateMask.h
	Vehicle.h
	WeatherMgr.h
	Entities/Summons/WildSummon.h
	WordFilter.h
	World.h
	WorldCreator.h
    WorldCreatorDefines.hpp
	WorldRunnable.h
	WorldSession.h
	WorldSocket.h
	WorldStatesHandler.h
	WorldStates.h
    WorldStrings.h
	WUtil.h
)

include_directories(
   ${OPENSSL_INCLUDE_DIR}
   ${PCRE_INCLUDE_DIR}
   ${CMAKE_SOURCE_DIR}/dep/recastnavigation/Detour/Include
   ${CMAKE_SOURCE_DIR}/dep/recastnavigation/Recast/Include
   ${CMAKE_SOURCE_DIR}/dep/vmaplib/include
   ${CMAKE_SOURCE_DIR}/dep/g3dlite/include
   ${CMAKE_SOURCE_DIR}/src/shared
   ${CMAKE_CURRENT_SOURCE_DIR}
   ${ZLIB_INCLUDE_DIRS}
)

add_executable(${PROJECT_NAME} ${sources} ${headers})

if(USE_PCH AND PCHSupport_FOUND)
    ADD_NATIVE_PRECOMPILED_HEADER(${PROJECT_NAME} StdAfx.h ${CMAKE_CURRENT_SOURCE_DIR}/StdAfx.cpp)
endif()

set_target_properties(${PROJECT_NAME} PROPERTIES ENABLE_EXPORTS TRUE)
add_dependencies(${PROJECT_NAME} shared g3dlite vmaplib Detour Recast)
configure_file(${CMAKE_CURRENT_SOURCE_DIR}/WorldConf.h.in ${CMAKE_CURRENT_SOURCE_DIR}/WorldConf.h)

target_link_libraries(${PROJECT_NAME} shared g3dlite vmaplib Detour Recast ${PCRE_LIBRARIES})
install(TARGETS ${PROJECT_NAME} RUNTIME DESTINATION .)
